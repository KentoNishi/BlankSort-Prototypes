<title>
    BlankSort Prototypes
</title>
<style>
    * {
        font-family: Calibri, Candara, Segoe, Segoe UI, Optima, Arial, sans-serif;
        color: white;
        font-size: 20px;
        background-color: rgb(29, 29, 29);
    }

    textarea {
        width: 750px;
        max-width: 100%;
        height: 35vh;
    }

    .centered {
        display: flex;
        justify-content: center;
        margin: 0 auto;
        margin-top: 10px;
    }
</style>
<p class="centered">Input:</p>
<textarea class="centered">
</textarea>
<button class="centered">
    Run Extraction
</button>
<p class="centered">Output:</p>
<textarea class="centered" readonly>
The Heroku instance may be inactive upon your first request. 
Your first request can take up to a minute to process.
</textarea>
<script>
    function run(text) {
        fetch('https://blanksort.herokuapp.com/post', {
            method: 'post',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ text: text })
        }).then(res => res.json())
            .then(res => {
                console.log(res);
                if (res.status != "ok" || res.result.length == 0) {
                    document.querySelectorAll("textarea")[1].value = "The server encountered an error.";
                } else {
                    str = []
                    for (var i = 0; i < res.result.length; i++) {
                        str.push((i + 1) + ". " + res.result[i][0] + ": " + res.result[i][1].toFixed(3));
                    }
                    document.querySelectorAll("textarea")[1].value = str.join("\n");
                }
            });
    }
    document.querySelectorAll("button")[0].onclick = () => {
        run(document.querySelectorAll("textarea")[0].value);
    };
</script>